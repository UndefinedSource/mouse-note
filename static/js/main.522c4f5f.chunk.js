(this["webpackJsonpmouse-note"]=this["webpackJsonpmouse-note"]||[]).push([[0],[,,function(e,t){t.__esModule=!0,t.EVENT_LISTENER=t.APP_SETTING=t.CURSOR_CLASS=t.KEYBOARD_KEY=t.TOOL_MODE=t.CURSOR_STYLE=t.COLOR=void 0,t.COLOR={BLACK:"rgb(  0,   0,   0)",WHITE:"rgb(255, 255, 255)",RED:"rgb(235,  64,  52)",GREEN:"rgb( 50, 168,  82)",BLUE:"rgb( 66, 135, 245)"},t.CURSOR_STYLE={CROSSHAIR:"cursor crosshair",CIRCLE:"cursor circle",SQUARE:"cursor square",TEXT:"cursor text"},t.TOOL_MODE={PEN:"PEN",CIRCLE:"CIRCLE",SQUARE:"SQUARE",SHAPE:{RECT:"SHAPE_RECT",ELLIPSE:"SHAPE_ELLIPSE"}},t.KEYBOARD_KEY={E:"e",SHIFT:"Shift"},t.CURSOR_CLASS={PEN:t.CURSOR_STYLE.CROSSHAIR,CIRCLE:t.CURSOR_STYLE.CIRCLE,SQUARE:t.CURSOR_STYLE.SQUARE,SHAPE_RECT:t.CURSOR_STYLE.CROSSHAIR,SHAPE_ELLIPSE:t.CURSOR_STYLE.CROSSHAIR,TEXT:t.CURSOR_STYLE.TEXT},t.APP_SETTING={CANVAS:{BACKGROUND_COLOR:t.COLOR.WHITE},TOOL:{MODE:t.TOOL_MODE.PEN,COLOR:t.COLOR.BLACK,SIZE:10},GRID:{LINE_WIDTH:1,GAP:30}},t.EVENT_LISTENER={RESIZE:"resize",MOUSE:{UP:"mouseup",DOWN:"mousedown",MOVE:"mousemove"},KEY:{UP:"keyup",DOWN:"keydown"},TOUCH:{START:"touchstart",END:"touchend",MOVE:"touchmove"}}},,function(e,t){t.__esModule=!0,t.CANVAS=void 0,t.CANVAS={LINE_WIDTH:1,drawCircle:function(e,t,n,r,c,o){e.beginPath(),e.lineWidth=this.LINE_WIDTH,e.strokeStyle=c,e.arc(t,n,r,0,2*Math.PI,!1),e.fillStyle=o,e.fill(),e.stroke()},drawEllipse:function(e,t,n,r,c,o,i){e.beginPath(),e.lineWidth=this.LINE_WIDTH,e.strokeStyle=o,e.ellipse(t,n,r,c,Math.PI,0,2*Math.PI,!1),e.fillStyle=i,e.fill(),e.stroke()},drawLine:function(e,t,n,r,c){e.lineTo(t,n),e.strokeStyle=c,e.lineWidth=r,e.stroke()},drawSquare:function(e,t,n,r,c){e.fillStyle=c,e.fillRect(t,n,r,r)},drawRectangle:function(e,t,n,r,c,o){e.fillStyle=o,e.fillRect(t,n,r,c)},finishDraw:function(e){e.beginPath()},getHalfLineWidth:function(){return this.LINE_WIDTH/2},getTriangleHypotenuse:function(e,t){return Math.sqrt(e*e+t*t)},SQUARE:{getX:function(e,t){return e-t/2},getY:function(e,t){return this.getX(e,t)}},CIRCLE:{getRadius:function(e){var n=e/2-t.CANVAS.LINE_WIDTH;return n>0?n:t.CANVAS.LINE_WIDTH/2}}}},,function(e,t){t.__esModule=!0,t.SHAPE=void 0,t.SHAPE={isEndXLeft:function(e,t){return e<t},isEndYDown:function(e,t){return this.isEndXLeft(e,t)},getX:function(e,t){return e<t?e:t},getY:function(e,t){return this.getX(e,t)},getWidth:function(e,t){return e<t?t-e:e-t},getHeight:function(e,t){return this.getWidth(e,t)},getMinSideLength:function(e,t,n,r){var c=Math.abs(n-e),o=Math.abs(r-t);return c<o?c:o},getCenterPosition:function(e,t,n,r){return{x:(e+n)/2,y:(t+r)/2}},getEllipse:function(e,t,n,r){var c=this.getCenterPosition(e,t,n,r);return{x:c.x,y:c.y,radiusX:this.getWidth(e,n)/2,radiusY:this.getHeight(t,r)/2}},getCircle:function(e,t,n,r){var c=e,o=t,i=this.getMinSideLength(e,t,n,r)/2,a=this.isEndXLeft(e,n),u=this.isEndYDown(t,r);return a&&u?(c+=i,o+=i):!a&&u?(c-=i,o+=i):a&&!u?(c+=i,o-=i):(c-=i,o-=i),{x:c,y:o,radius:i}},getRegularShape:function(e,t,n,r){var c=this.getMinSideLength(e,t,n,r),o=e,i=t,a=this.isEndXLeft(e,n),u=this.isEndYDown(t,r);return a&&u||(!a&&u?o-=c:a&&!u?i-=c:(o=e-c,i=t-c)),{x:o,y:i,sideLength:c}}}},function(e,t){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e}).apply(this,arguments)};t.__esModule=!0,t.STYLE=void 0,t.STYLE={getPosition:function(e,t){return{"--x":e+"px","--y":t+"px"}},getWidthAndHeight:function(e,t){return{"--width":e+"px","--height":t+"px"}},getPen:function(e,t,r,c){var o=r/2;return n(n({},this.getPosition(e-o,t)),{"--crosshairVerticalX":o+"px","--crosshairVerticalY":-o+"px","--size":r+"px","--color":""+c})},getCircle:function(e,t,r,c){var o=r/2;return n(n({},this.getPosition(e-o,t-o)),{"--size":r+"px","--color":""+c})},getSquare:function(e,t,n,r){return this.getCircle(e,t,n,r)},getShapePreview:function(e,t,r,c,o,i){var a=i.every((function(e){return!0===e}));return n(n(n({},this.getPosition(e,t)),this.getWidthAndHeight(r,c)),{"--backgroundColor":""+o,"--display":a?"inline":"none"})},getCirclePreview:function(e,t,n,r,c,o){var i=this.getShapePreview(e,t,n,r,c,o);return i.borderRadius="50%",i}}},function(e,t){t.__esModule=!0,t.COLOR=void 0,t.COLOR={hexAlphabets:["A","B","C","D","E","F"],convertHexToRgb:function(e){return"rgb("+parseInt(e.substr(1,2),16)+","+parseInt(e.substr(3,2),16)+","+parseInt(e.substr(5,2),16)+")"},convertNumToHex:function(e){var t=e.toString();return e>9&&(t=this.hexAlphabets[e-10]),t},convertDecimalToHex:function(e){for(var t=0;e>15;)e-=16,t++;return""+this.convertNumToHex(t)+this.convertNumToHex(0)},convertRgbToHex:function(e){var t="#",n=e.match(/[0-9]+/g);if(n)for(var r=0,c=n;r<c.length;r++){var o=c[r];t+=this.convertDecimalToHex(Number(o))}return t}}},,,function(e,t){t.__esModule=!0,t.REGREX=void 0,t.REGREX={getRegrexNumberRange:function(e,t){return e?new RegExp("["+e+"-"+t+"]"):new RegExp("[0-"+t+"]")}}},,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(10),i=n.n(o),a=n(3),u=n(5),s=n(2),l=n(6),O=n(7),E=n(1),f=function(e){var t=e.dragPosition,n=e.isShiftKeyOn,c=e.toolColor,o=e.toolMode,i=e.position,a=e.previewConditions,u=e.regularShape,f=Object(r.useCallback)((function(){return{x:l.SHAPE.getX(t.x,i.x),y:l.SHAPE.getY(t.y,i.y),width:l.SHAPE.getWidth(t.x,i.x),height:l.SHAPE.getHeight(t.y,i.y)}}),[t,i]),h=Object(r.useMemo)((function(){var e=f(),t=e.x,n=e.y,r=e.width,o=e.height;return O.STYLE.getShapePreview(t,n,r,o,c,a)}),[c,a,f]),b=Object(r.useMemo)((function(){var e=f(),t=e.x,n=e.y,r=e.width,o=e.height;return O.STYLE.getCirclePreview(t,n,r,o,c,a)}),[c,a,f]),C=Object(r.useMemo)((function(){var e=u.x,t=u.y,n=u.sideLength;return O.STYLE.getShapePreview(e,t,n,n,c,a)}),[c,u,a]),d=Object(r.useMemo)((function(){var e=u.x,t=u.y,n=u.sideLength;return O.STYLE.getCirclePreview(e,t,n,n,c,a)}),[c,u,a]);return Object(E.jsx)("div",{className:"shape-previewer",style:function(){switch(o){case s.TOOL_MODE.SHAPE.RECT:return n?C:h;case s.TOOL_MODE.SHAPE.ELLIPSE:return n?d:b}return{}}()})},h=n(4),b=function(e,t){var n=Object(r.useCallback)((function(e){t(e)}),[t]);Object(r.useEffect)((function(){return window.addEventListener(e,n),function(){window.removeEventListener(e,n)}}),[e,n])},C=c.a.memo((function(e){var t=e.canvasRef,n=e.panelRef,c=e.tool,o=Object(r.useState)({x:0,y:0}),i=Object(u.a)(o,2),C=i[0],d=i[1],g=Object(r.useState)({x:0,y:0}),S=Object(u.a)(g,2),j=S[0],R=S[1],T=Object(r.useState)(!1),L=Object(u.a)(T,2),x=L[0],v=L[1],m=Object(r.useState)(!1),N=Object(u.a)(m,2),A=N[0],p=N[1],y=Object(r.useCallback)((function(){return t.current?t.current.getContext("2d"):null}),[t]),_=Object(r.useCallback)((function(){return n.current?n.current.clientHeight:0}),[n]),P=Object(r.useCallback)((function(){return Object.values(s.TOOL_MODE.SHAPE).some((function(e){return e===c.mode}))}),[c.mode]),I=Object(r.useCallback)((function(){return{x:j.x,y:j.y}}),[j]),k=Object(r.useCallback)((function(){return{x:C.x,y:C.y}}),[C]),w=Object(r.useCallback)((function(){return[x,P()]}),[x,P]),H=Object(r.useCallback)((function(){return l.SHAPE.getRegularShape(j.x,j.y,C.x,C.y)}),[C,j]),M=Object(r.useCallback)((function(){return l.SHAPE.getEllipse(j.x,j.y,C.x,C.y)}),[C,j]),D=Object(r.useCallback)((function(){return l.SHAPE.getCircle(j.x,j.y,C.x,C.y)}),[C,j]),V=Object(r.useCallback)((function(){var e=y();if(e){var t=j.y-_(),n=C.x-j.x,r=C.y-j.y;h.CANVAS.drawRectangle(e,j.x,t,n,r,c.color)}}),[C,j,c.color,y,_]),U=Object(r.useCallback)((function(){var e=y();if(e){var t=H(),n=t.x,r=t.y,o=t.sideLength;h.CANVAS.drawSquare(e,n,r-_(),o,c.color)}}),[c.color,y,_,H]),Y=Object(r.useCallback)((function(){var e=y();if(e){var t=M(),n=t.x,r=t.y,o=t.radiusX,i=t.radiusY;h.CANVAS.drawEllipse(e,n,r-_(),o,i,c.color,c.color)}}),[c.color,y,_,M]),W=Object(r.useCallback)((function(){var e=y();if(e){var t=D(),n=t.x,r=t.y,o=t.radius;h.CANVAS.drawCircle(e,n,r-_(),o,c.color,c.color)}}),[c.color,y,_,D]),z=Object(r.useCallback)((function(){var e=y();if(e){var t=C.y-_();h.CANVAS.drawLine(e,C.x,t,c.size,c.color)}}),[C,c.size,c.color,y,_]),G=Object(r.useCallback)((function(){var e=y();if(e){var t=C.y-_(),n=h.CANVAS.CIRCLE.getRadius(c.size);h.CANVAS.drawCircle(e,C.x,t,n,c.color,c.color)}}),[C,c.color,c.size,y,_]),X=Object(r.useCallback)((function(){var e=y();if(e){var t=h.CANVAS.SQUARE.getX(C.x,c.size),n=h.CANVAS.SQUARE.getY(C.y,c.size)-_();h.CANVAS.drawSquare(e,t,n,c.size,c.color)}}),[C,c.color,c.size,y,_]),B=Object(r.useCallback)((function(){var e=s.TOOL_MODE.PEN,t=s.TOOL_MODE.CIRCLE,n=s.TOOL_MODE.SQUARE;switch(c.mode){case e:z();break;case t:G();break;case n:X()}}),[c.mode,z,G,X]),K=Object(r.useCallback)((function(){switch(v(!1),c.mode){case s.TOOL_MODE.SHAPE.RECT:A?U():V();break;case s.TOOL_MODE.SHAPE.ELLIPSE:A?W():Y()}var e=y();e&&h.CANVAS.finishDraw(e)}),[c.mode,A,V,U,Y,W,y]),Q=Object(r.useCallback)((function(){v(!0),P()&&R((function(e){return Object(a.a)(Object(a.a)({},e),{},{x:C.x,y:C.y})}))}),[C,P]),F=Object(r.useCallback)((function(e){d((function(t){return Object(a.a)(Object(a.a)({},t),{},{x:e.x,y:e.y})}))}),[]),q=Object(r.useCallback)((function(e){d((function(t){return Object(a.a)(Object(a.a)({},t),{},{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})}))}),[]),Z=Object(r.useCallback)((function(){p(!1)}),[]),J=Object(r.useCallback)((function(e){p(e.key===s.KEYBOARD_KEY.SHIFT)}),[]);return Object(r.useEffect)((function(){x&&B()}),[x,B]),b(s.EVENT_LISTENER.MOUSE.UP,K),b(s.EVENT_LISTENER.MOUSE.DOWN,Q),b(s.EVENT_LISTENER.MOUSE.MOVE,F),b(s.EVENT_LISTENER.KEY.UP,Z),b(s.EVENT_LISTENER.KEY.DOWN,J),b(s.EVENT_LISTENER.TOUCH.START,Q),b(s.EVENT_LISTENER.TOUCH.END,K),b(s.EVENT_LISTENER.TOUCH.MOVE,q),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{id:"cursor",className:s.CURSOR_CLASS[c.mode],style:function(){switch(c.mode){case s.TOOL_MODE.CIRCLE:return O.STYLE.getCircle(C.x,C.y,c.size,c.color);case s.TOOL_MODE.SQUARE:return O.STYLE.getSquare(C.x,C.y,c.size,c.color)}return O.STYLE.getPen(C.x,C.y,c.size,c.color)}()}),Object(E.jsx)(f,{toolMode:c.mode,toolColor:c.color,isShiftKeyOn:A,dragPosition:I(),position:k(),previewConditions:w(),regularShape:H()})]})})),d=c.a.memo(c.a.forwardRef((function(e,t){var n=e.width,c=e.height,o=e.hasGrid,i=e.panelRef,l=Object(r.useState)({x:0,y:0,rows:0,cols:0,lineGap:s.APP_SETTING.GRID.GAP}),O=Object(u.a)(l,2),f=O[0],h=O[1],b=Object(r.useCallback)((function(){return i.current?i.current.clientHeight:0}),[i]);Object(r.useEffect)((function(){h((function(e){return Object(a.a)(Object(a.a)({},e),{},{x:0,y:b(),cols:window.innerWidth,rows:window.innerHeight})}))}),[b]);var C=Object(r.useCallback)((function(){for(var e=[],t=f.y;t<f.rows+f.y;t+=f.lineGap)e.push(Object(E.jsx)("span",{className:"grid-line horizontal",style:{top:"".concat(t,"px")}},"horizontal".concat(t)));for(var n=0;n<f.cols;n+=f.lineGap)e.push(Object(E.jsx)("span",{className:"grid-line vertical",style:{top:"".concat(f.y,"px"),left:"".concat(n,"px"),height:"calc(100% - ".concat(f.y,"px)")}},"vertical".concat(n)));return e}),[f]);return Object(r.useEffect)((function(){h((function(e){return Object(a.a)(Object(a.a)({},e),{},{x:0,y:b(),cols:n,rows:c})}))}),[n,c,b]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("canvas",{id:"canvas",ref:t,width:n,height:c}),o&&C()]})}))),g=n(8),S=c.a.memo(c.a.forwardRef((function(e,t){return Object(E.jsx)("input",{type:"color",className:"canvas-background-picker",ref:t,defaultValue:e.defaultValue,onChange:function(t){return e.handleBackgroundColorChange(t)}})}))),j=c.a.memo((function(e){return Object(E.jsx)("button",{className:"icon grid",onClick:function(){return e.handleOnClick()}})})),R=c.a.memo((function(e){return Object(E.jsx)("button",{className:"icon trash-can",onClick:function(){return e.handleOnClick()}})})),T=c.a.memo((function(e){return Object(E.jsx)("button",{className:"icon save",onClick:function(){return e.handleOnClick()}})})),L=n(11),x=c.a.memo(c.a.forwardRef((function(e,t){var n=e.toolSize,c=e.handleCanvasBackgroundColorChange,o=e.handleCanvasClear,i=e.handleExportAsImage,a=e.handleGridShow,u=e.handleToolColorChange,l=e.handleToolModeChange,O=e.handleToolSizeChange,f=Object(r.useRef)(null),h=Object(r.useRef)(null),C=Object(r.useMemo)((function(){return[s.COLOR.BLACK,s.COLOR.WHITE,s.COLOR.RED,s.COLOR.GREEN,s.COLOR.BLUE]}),[]),d=Object(r.useMemo)((function(){return[{className:"pen",name:s.TOOL_MODE.PEN},{className:"circle",name:s.TOOL_MODE.CIRCLE},{className:"square",name:s.TOOL_MODE.SQUARE}]}),[]),x=Object(r.useMemo)((function(){return[{className:"ellipse",name:s.TOOL_MODE.SHAPE.ELLIPSE},{className:"rect",name:s.TOOL_MODE.SHAPE.RECT}]}),[]),v=Object(r.useCallback)((function(e){if(0!==C.length){var t=L.REGREX.getRegrexNumberRange(1,C.length);e.key.match(t)&&u(C[Number(e.key)-1])}}),[u,C]);return b(s.EVENT_LISTENER.KEY.DOWN,v),Object(E.jsxs)("div",{id:"panel",ref:t,children:[Object(E.jsx)("div",{className:"tool-mode",children:d.map((function(e){return Object(E.jsx)("button",{className:"icon ".concat(e.className),onClick:function(){return l(e.name)}},"tool_".concat(e.name))}))}),Object(E.jsxs)("div",{className:"tool-size",children:[Object(E.jsx)("label",{className:"lbl-size",children:n}),Object(E.jsx)("input",{type:"range",className:"ipt-size",id:"mouseRadius",min:"1",max:"100",ref:f,defaultValue:n,onChange:function(e){return O(e.currentTarget.value)}})]}),Object(E.jsxs)("div",{className:"color-palette",children:[C.map((function(e){return Object(E.jsx)("button",{className:"btn color",style:{backgroundColor:e},onClick:function(){return u(e)}},e)})),Object(E.jsx)("input",{type:"color",className:"tool-color-picker",defaultValue:g.COLOR.convertRgbToHex(s.COLOR.WHITE),onChange:function(e){return function(e){var t=g.COLOR.convertHexToRgb(e.currentTarget.value);u(t)}(e)}})]}),Object(E.jsxs)("div",{className:"features",children:[x.map((function(e){return Object(E.jsx)("button",{className:"icon ".concat(e.className),onClick:function(){return l(e.name)}},"feature_".concat(e.name))})),Object(E.jsx)(S,{ref:h,defaultValue:g.COLOR.convertRgbToHex(s.APP_SETTING.CANVAS.BACKGROUND_COLOR),handleBackgroundColorChange:function(e){var t=g.COLOR.convertHexToRgb(e.currentTarget.value);c(t)}}),Object(E.jsx)(j,{handleOnClick:function(){return a()}}),Object(E.jsx)(R,{handleOnClick:function(){return o()}}),Object(E.jsx)(T,{handleOnClick:function(){return i()}})]})]})}))),v=(n(17),function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useState)(!1),c=Object(u.a)(n,2),o=c[0],i=c[1],l=Object(r.useState)({width:0,height:0}),O=Object(u.a)(l,2),f=O[0],h=O[1],g=Object(r.useState)({color:s.APP_SETTING.TOOL.COLOR,mode:s.APP_SETTING.TOOL.MODE,size:s.APP_SETTING.TOOL.SIZE}),S=Object(u.a)(g,2),j=S[0],R=S[1],T=function(){return t.current?t.current.clientHeight:0},L=Object(r.useCallback)((function(e){R((function(t){return Object(a.a)(Object(a.a)({},t),{},{color:e})}))}),[]),v=Object(r.useCallback)((function(e){R((function(t){return Object(a.a)(Object(a.a)({},t),{},{mode:e})}))}),[]),m=Object(r.useCallback)((function(e){R((function(t){return Object(a.a)(Object(a.a)({},t),{},{size:e})}))}),[]),N=Object(r.useCallback)((function(t){e.current.style.backgroundColor=t}),[]),A=Object(r.useCallback)((function(){var t=e.current?e.current.getContext("2d"):null;t&&t.clearRect(0,0,f.width,f.height)}),[f]),p=Object(r.useCallback)((function(e){h((function(t){return Object(a.a)(Object(a.a)({},t),{},{width:e.currentTarget.outerWidth,height:e.currentTarget.innerHeight-T()})}))}),[]);return b(s.EVENT_LISTENER.RESIZE,p),Object(r.useEffect)((function(){h((function(e){return Object(a.a)(Object(a.a)({},e),{},{width:window.innerWidth,height:window.innerHeight-T()})}))}),[]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(C,{canvasRef:e,panelRef:t,tool:j}),Object(E.jsx)(x,{ref:t,toolSize:j.size,handleCanvasClear:A,handleCanvasBackgroundColorChange:N,handleExportAsImage:function(){var t=e.current;if(t){var n=t.toDataURL("image/png"),r=document.createElement("a");r.download="image.png",r.href=n,r.click()}},handleGridShow:function(){i(!o)},handleToolColorChange:L,handleToolModeChange:v,handleToolSizeChange:m}),Object(E.jsx)(d,{ref:e,panelRef:t,width:f.width,height:f.height,hasGrid:o})]})}),m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),o(e),i(e)}))};i.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(v,{})}),document.getElementById("root")),m()}],[[18,1,2]]]);
//# sourceMappingURL=main.522c4f5f.chunk.js.map